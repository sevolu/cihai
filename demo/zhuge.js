!function(e){var t={};function u(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,u),i.l=!0,i.exports}u.m=e,u.c=t,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},u.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},u.n=function(e){var t=e&&e.__esModule?function(){return e['default']}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u(u.s=39)}({38:function(e,t){e.exports={1044:{utm_source:"分享",utm_medium:"带shareTicket的小程序消息卡片（详情）"},1007:{utm_source:"分享",utm_medium:"单人聊天会话中的小程序消息卡片"},1008:{utm_source:"分享",utm_medium:"群聊会话中的小程序消息卡片"},1036:{utm_source:"分享",utm_medium:"App分享消息卡片"},1020:{utm_source:"公众号",utm_medium:"公众号profile页相关小程序列表"},1035:{utm_source:"公众号",utm_medium:"公众号自定义菜单"},1043:{utm_source:"公众号",utm_medium:"公众号模板消息"},1058:{utm_source:"公众号",utm_medium:"公众号文章"},1074:{utm_source:"公众号会话",utm_medium:"公众号会话下发的小程序消息卡片"},1067:{utm_source:"广告",utm_medium:"公众号文章广告"},1068:{utm_source:"广告",utm_medium:"附近小程序列表广告"},1073:{utm_source:"客服消息",utm_medium:"客服消息列表下发的小程序消息卡片"},1011:{utm_source:"扫码",utm_medium:"扫描二维码"},1012:{utm_source:"扫码",utm_medium:"长按图片识别二维码"},1013:{utm_source:"扫码",utm_medium:"手机相册选取二维码"},1025:{utm_source:"扫码",utm_medium:"扫描一维码"},1031:{utm_source:"扫码",utm_medium:"长按图片识别一维码"},1032:{utm_source:"扫码",utm_medium:"手机相册选取一维码"},1047:{utm_source:"扫码",utm_medium:"扫描小程序码"},1048:{utm_source:"扫码",utm_medium:"长按图片识别小程序码"},1049:{utm_source:"扫码",utm_medium:"手机相册选取小程序码"},1027:{utm_source:"搜索",utm_medium:"顶部搜索框搜索结果页“使用过的小程序”列表"},1005:{utm_source:"搜索",utm_medium:"顶部搜索框的搜索结果页"},1006:{utm_source:"搜索",utm_medium:"发现栏小程序主入口搜索框的搜索结果页"},1042:{utm_source:"搜索",utm_medium:"添加好友搜索框的搜索结果页"},1053:{utm_source:"搜索",utm_medium:"搜一搜的结果页"},1054:{utm_source:"搜索",utm_medium:"顶部搜索框小程序快捷入口"},1064:{utm_source:"微信WIFI",utm_medium:"微信连Wi-Fi状态栏"},1078:{utm_source:"微信WIFI",utm_medium:"连Wi-Fi成功页"},1028:{utm_source:"微信卡券",utm_medium:"我的卡包"},1029:{utm_source:"微信卡券",utm_medium:"卡券详情页"},1052:{utm_source:"微信卡券",utm_medium:"卡券的适用门店列表"},1019:{utm_source:"微信支付",utm_medium:"微信钱包"},1034:{utm_source:"微信支付",utm_medium:"微信支付完成页"},1057:{utm_source:"微信支付",utm_medium:"钱包中的银行卡详情页"},1071:{utm_source:"微信支付",utm_medium:"钱包中的银行卡列表页"},1072:{utm_source:"微信支付",utm_medium:"二维码收款页面"},1001:{utm_source:"微信主程序",utm_medium:"发现栏小程序主入口"},1022:{utm_source:"微信主程序",utm_medium:"聊天顶部置顶小程序入口"},1024:{utm_source:"微信主程序",utm_medium:"小程序 profile 页"},1089:{utm_source:"微信主程序",utm_medium:"微信聊天主界面下拉"},1026:{utm_source:"微信主程序",utm_medium:"附近小程序列表"},1037:{utm_source:"小程序",utm_medium:"小程序打开小程序"},1038:{utm_source:"小程序",utm_medium:"从另一个小程序返回"},1090:{utm_source:"小程序",utm_medium:"长按小程序右上角菜单唤出最近使用历史"},1014:{utm_source:"小程序模板消息",utm_medium:"小程序模板消息"},1039:{utm_source:"摇电视",utm_medium:"摇电视"},1056:{utm_source:"音乐播放器菜单",utm_medium:"音乐播放器菜单"},1023:{utm_source:"桌面图标",utm_medium:"安卓系统桌面图标"},1017:{utm_source:"体验版",utm_medium:"前往体验版的入口页"},1030:{utm_source:"测试",utm_medium:"自动化测试下打开小程序"},1059:{utm_source:"体验版",utm_medium:"体验版小程序绑定邀请页"},1092:{utm_source:"微信城市服务",utm_medium:"城市服务入口"},isShare:function(e){return-1!==[1020,1035,1036,1037,1038,1043].indexOf(e)}}},39:function(e,t,u){var n,i,r,o,s,m,c={},_=u(38);n=Array.prototype,i=Object.prototype,r=n.slice,o=i.hasOwnProperty,s=n.forEach,m={},c.uuid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},c.each=function(e,t,u){if(null!=e)if(s&&e.forEach===s)e.forEach(t,u);else if(e.length===+e.length){for(var n=0,i=e.length;n<i;n++)if(n in e&&t.call(u,e[n],n,e)===m)return}else for(var r in e)if(o.call(e,r)&&t.call(u,e[r],r,e)===m)return},c.extend=function(e){return c.each(r.call(arguments,1),function(t){for(var u in t)void 0!==t[u]&&(e[u]=t[u])}),e},c.isUndefined=function(e){return void 0===e},c.isString=function(e){return"[object String]"==Object.prototype.toString.call(e)},c.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},c.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},c.isObject=function(e){return e===Object(e)&&!c.isArray(e)},c.getSystemInfo=function(){var e=wx.getSystemInfoSync();return e.resolution=e.windowWidth+"x"+e.windowHeight,e},c.encode=function(e){var t={};for(var u in e)t["_"+u]=e[u];return t},c.getNet=function(e){wx.getNetworkType({complete:function(t){var u="wifi"===t.networkType?1:0,n="wifi"===t.networkType?0:{"2g":1,"3g":3,"4g":13}[t.networkType];d.set("net",u),d.set("mnet",n),e&&e({net:u,mnet:n})}})};var d={key:"zg",get:function(e){var t=this.getAll();return t?t[e]:null},set:function(e,t){var u=this.getAll();u[e]=t,wx.setStorageSync(this.key,u)},setUtm:function(e){wx.setStorageSync("utm",e)},getUtm:function(){return wx.getStorageSync("utm")},del:function(e){var t=this.getAll();delete t[e],wx.setStorageSync(this.key,t)},getAll:function(){var e=wx.getStorageSync(this.key);return e||(e={cache:[],ec:0,net:0,mnet:0},wx.setStorageSync(this.key,e)),e},clear:function(){wx.removeStorageSync(this.key)},getDid:function(){return wx.getStorageSync("zg-did")},registerDid:function(e){wx.setStorageSync("zg-did",e||c.uuid())},updateSession:function(e,t,u){let n=wx.getStorageSync("zg-session");n?(n.sid=e,n.active=t):n={sid:e,active:t},console.log(u+"set session info is "+JSON.stringify(n)),wx.setStorageSync("zg-session",n)},getSessionInfo:function(){return wx.getStorageSync("zg-session")},flush:function(){for(var e=this.get("sid"),t=this.get("cache"),u=0,n=t.length;u<n;u++){var i=t[u];i.hasOwnProperty("sid")||(i.sid=e)}return this.set("cache",[]),t}},a=function(){this._props={appKey:"",br:"wx-app",an:"",vn:"",cn:""},this._url={normal:"https://u.zhugeapi.com/web_event",bac:"https://ubak.zhugeio.com/web_event"},this._config={debug:!1,did:"",an:"wxApp",vn:"1.0",pv:!1},this._sdk="web",this._sdkv="2.1"};a.prototype._registerOnce=function(){d.getDid()||d.registerDid(this._config.did)},a.prototype._sendRequest=function(e){var t=new Date,u={method:"web_event_srv.upload",event:{sln:"itn",pl:"js",sdk:"zg-js",sdkv:this._sdkv,owner:"zg",ut:[t.getFullYear(),t.getMonth()+1,t.getDate()].join("-")+" "+t.toTimeString().match(/\d{2}:\d{2}:\d{2}/)[0],tz:6e4*-t.getTimezoneOffset(),debug:this._config.debug?1:0,ak:this._props.appKey,usr:{did:d.getDid()},data:[]},_:(new Date).getTime().toString()},n=d.get("cache");d.get("sid")?(n.length&&u.event.data.push(d.flush()),u.event.data.push(e),this._request(u)):(n.push(e),d.set("cache",n))},a.prototype._request=function(e){var t=this;wx.request({url:this._url.normal,data:e,responseType:"arraybuffer",fail:function(u){t._url.normal.toUpperCase()===t._url.bac.toUpperCase()||wx.request({url:t._url.bac,data:e,responseType:"arraybuffer"})}})},a.prototype._info=function(){var e=c.getSystemInfo(),t=new Date,u={dt:"pl",pr:{$rs:e.resolution,$tz:6e4*-t.getTimezoneOffset(),$ct:t.getTime(),$cuid:d.get("cuid")}};this._sendRequest(u)},a.prototype._sessionStart=function(){var e=new Date,t=e.getTime(),u=c.getSystemInfo(),n=this;d.set("sid",t),d.updateSession(t,t,"会话开始"),c.getNet(function(i){var r={dt:"ss",pr:{$ct:e.getTime(),$sid:t,$cuid:d.get("cuid"),$cn:n._props.cn,$tz:6e4*-e.getTimezoneOffset(),$url:d.get("$url"),$os:u.system.split(/\s/)[0],$ov:u.system.split(/\s/)[1],$wv:u.version,$mnet:i.mnet,$net:i.net,$vn:n._props.vn,$referrer_domain:"miniprogram"}};r.pr=c.extend(r.pr,d.getUtm()),n._sendRequest(r)})},a.prototype._sessionEnd=function(){var e=d.get("sid"),t=new Date,u=t.getTime()-e,n={dt:"se",pr:{$ct:t.getTime(),$cn:this._props.cn,$tz:6e4*-t.getTimezoneOffset(),$dru:u,$sid:e,$cuid:d.get("cuid"),$referrer_domain:"miniprogram"}};n.pr=c.extend(n.pr,d.getUtm()),this._sendRequest(n),d.clear()},a.prototype._init=function(){this._registerOnce(),this._sessionStart(),this._info()},a.prototype.load=function(e,t){this._props.appKey=e,d.set("appKey",e),c.isObject(t)&&(this._config=c.extend(this._config,t),this._config.an&&(this._props.an=this._config.an),this._config.vn&&(this._props.vn=this._config.vn))},a.prototype.identify=function(e,t){var u=d.get("sid"),n=new Date;d.set("cuid",e);var i={dt:"usr",pr:{$ct:n.getTime(),$tz:6e4*-n.getTimezoneOffset(),$cuid:e,$sid:u,$url:d.get("$url")}};c.isObject(t)&&(i.pr=c.extend(i.pr,c.encode(t))),this._sendRequest(i)},a.prototype.track=function(e,t){e&&e.length>0?this.privateTrack(e,t,!0):console.error("track 事件名称不能为空")},a.prototype.privateTrack=function(e,t,u){var n=d.get("sid"),i=new Date,r=c.getSystemInfo(),o=u?"evt":"abp",s=this;u&&d.set("ec",d.get("ec")+1),u&&d.updateSession(n,i.getTime(),"标记事件"+o),c.getNet(function(m){var _={dt:o,pr:{$eid:e,$ct:i.getTime(),$tz:6e4*-i.getTimezoneOffset(),$cuid:d.get("cuid"),$cn:s._props.cn,$sid:n,$url:d.get("$url"),$os:r.system.split(/\s/)[0],$ov:r.system.split(/\s/)[1],$wv:r.version,$mnet:m.mnet+"",$referrer_domain:"miniprogram",$net:m.net+"",$vn:s._props.vn}};_.pr=c.extend(_.pr,d.getUtm()),c.isObject(t)&&(_.pr=u?c.extend(_.pr,c.encode(t)):c.extend(_.pr,t)),s._sendRequest(_)})},a.prototype.start=function(){this._init()},a.prototype.end=function(){this._sessionEnd()};var p=new a;function f(e,t,u){if(e[t]){var n=e[t];e[t]=function(){n.apply(this,arguments),u.apply(this,arguments)}}else e[t]=u}function g(e,t){var u=e||{},n=t||{};return["utm_source","utm_medium","utm_campaign","utm_content","utm_term"].forEach(function(e){u[e]?n["$"+e]=u[e]:u["$"+e]&&(n["$"+e]=u["$"+e])}),n}var l=function(){},h=function(e){let t=e.scene,u=t.toString();p._props.cn=u;let n,i,r=_[u];_.isShare(t)&&(i=e.referrerInfo.appId),r&&(n={utm_source:r.utm_source,utm_medium:r.utm_medium,utm_campaign:i});let o=g(n),s=g(e.query,o);d.setUtm(s);let m=d.getSessionInfo();if(m&&m.hasOwnProperty("active")){let e=(new Date).getTime();e-m.active>3e4?(p.end(),p.start()):(d.set("sid",m.sid),d.updateSession(m.sid,e,"进入应用"))}else p.start()},y=function(){let e=d.get("sid"),t=(new Date).getTime();d.updateSession(e,t,"应用退出")},v=App;App=function(e){f(e,"onLaunch",l),f(e,"onShow",h),f(e,"onHide",y),v(e)};var w=function(e){let t=Object.keys(e),u=this.__route__,n=this.__route__,i=[];if(t&&t.length>0){u+="?";for(let u=0;u<t.length;u++){let n=t[u];i[u]=n+"="+e[n]}u+=i.join("&")}if(d.set("$url",u),!p._config.pv)return;let r={$page_title:n};p.privateTrack("pv",r,!1)},S=function(){let e=d.get("sid"),t=new Date;d.updateSession(e,t.getTime(),"pageShow")},$=function(){},x=Page;Page=function(e){f(e,"onLoad",w),f(e,"onShow",S),f(e,"onHide",$),x(e)},App.zhuge=p,e.exports=new a}});